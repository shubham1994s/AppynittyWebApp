@{
    Layout = "_AdminLayout";
}
<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
<link href="//cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="https://cdn.datatables.net/responsive/2.2.3/css/responsive.dataTables.min.css" rel="stylesheet" />
<link href="https://cdn.datatables.net/responsive/2.4.0/css/responsive.jqueryui.min.css" rel="stylesheet" />
<style>
    .danger {
        color: red !important;
    }

    .success {
        color: green !important;
    }
</style>
<h1 style="text-align: center; font-size: 1.8rem;">Job List</h1>
<div style="display: inline-flex;">
    <p style="text-align: left; margin-right: 20px;">
        <a class="btn btn-outline-danger" asp-area="Identity" asp-controller="Careers" asp-action="Index">Back</a>
    </p>
    <p style="text-align:right;margin-right:20px;">
        <a class="btn btn-outline-primary" asp-action="AddOrEdit">Create New</a>
    </p>
</div>
<div class="container">
    <br />
    <div style="width:90%; margin:0 auto;">
        <table id="example" class="table table-striped table-bordered dt-responsive nowrap" width="100%" cellspacing="0">
            <thead>
                <tr>
                   <th></th>
                    <th>Date</th>
                    <th>Job Title</th>
                    <th>Status</th>
                    <th>Edit</th>
                    <th>Details</th>
                    <th>View Reply</th>
                </tr>
            </thead>
        </table>
    </div>
</div>

@section Scripts{
    <script src="//cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/responsive/2.2.3/js/dataTables.responsive.min.js"></script>

    <script>
        $(document).ready(function () {
            debugger;
            $('#example').DataTable({
                ajax: {
                    url: "Careers/LoadCarrersData",
                    type: "POST",
                },
                'responsive': {
                    'details': {
                        'type': 'column',
                        'target': 0
                    }
                },
                'columnDefs': [
                    {
                        'data': null,
                        'defaultContent': '',
                        'className': 'control',
                        'orderable': false,
                        'targets': 0
                    }
                ],
                processing: true,
                serverSide: true,
                filter: true,
                columns: [

                    { 'data': null  },
                    {
                        "data": "date",
                        "render": function (data) {
                          
                            var date = new Date(data);
                            var month = date.getMonth() + 1;
                            var hours = date.getHours();
                            var minutes = date.getMinutes();
                            var ampm = hours >= 12 ? 'pm' : 'am';
                            hours = hours % 12;
                            hours = hours ? hours : 12; // the hour '0' should be '12'
                            minutes = minutes < 10 ? '0' + minutes : minutes;

                            return date.getDate() + "/" + (month.toString().length > 1 ? month : "0" + month) + "/" + date.getFullYear() + "  " + hours + ':' + minutes + ' ' + ampm;
                        }
                    },
                    { data: "jobTitle", name: "JobTitle" },
                    /* { data: "isActive", name: "IsActive" },*/
                    {
                        render: function (data, type, full, meta) {
                            console.log(full);
                            if (full["isActive"] == true) {
                                return '<span class="success">Active</span>';
                            }
                            else {

                                return '<span class="danger">InActive</span>';
                            }
                        }
                    },
                    {
                        render: function (data, type, full, meta) { return '<a class="btn btn-outline-primary" onclick="AddOrEdit(' + full["id"] + ')" >Edit</a>'; }, "width": "10%"
                    },
                    {
                        render: function (data, type, full, meta) { return '<a class="btn btn-outline-primary" onclick="Details(' + full["id"] + ')" >Details</a>'; }, "width": "10%"
                    },
                    //{
                    //    render: function (data, type, full, meta)
                    //    {
                    //        return '<a class="btn btn-outline-primary mr-4" onclick="ViewCV(' + full["id"] + ')" >View</a> <span style = "padding: 3px 8px; background: green;color: white;border-radius:50%;" > ' + full["careersCount"] + '</span > '; }, "width": "10%"
                    //},
                    {
                        render: function (data, type, full, meta) {
                            if (full["careersCount"] > 0) {
                                return '<a class="btn btn-outline-primary" style="margin-right:0px;" onclick="ViewCV(' + full["id"] + ')" >View</a> <span style = "padding: 3px 8px; background: green;color: white;border-radius:50%;margin-right: 0px;" > ' + full["careersCount"] + '</span > ';
                            
                            } else {
                                return '<a class="btn btn-outline-primary mr-4" onclick="ViewCV(' + full["id"] + ')" >View</a>';
                            }
                        }, "width": "10%"
                    },
                ]
            })

        });


        function AddOrEdit(id) {
            window.location.href = "/Careers/AddOrEdit?Id=" + id;
        };
        function Details(id) {
            window.location.href = "/Careers/Details?Id=" + id;
        };
        function ViewCV(id) {
            window.location.href = "/Careers/ViewCV?Id=" + id;
        };
    </script>
}
